<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>자바스크립트 - 버블링+캡쳐링 함수 기초 응용편(장바구니)</title>
</head>
<body>
	<input type="checkbox" id="all" onclick="all_ck(this.checked)" > 상품 전체 선택 <br>
	<!-- input type이 checkbox여서 this.checked를 넣어준거 -->
	<input type="checkbox" value="5000" id="a1" onclick="basket(this.value,this.checked)" > 포도 : 5,000원 <br>
	<input type="checkbox" value="1000" id="a2" onclick="basket(this.value,this.checked)" > 사과 : 1,000원 <br>
	<input type="checkbox" value="8000" id="a3" onclick="basket(this.value,this.checked)" > 멜론 : 8,000원 <br>
	<input type="checkbox" value="1200" id="a4" onclick="basket(this.value,this.checked)" > 체리 : 1,200원 <br>
	결제하실 금액 <span id="total">0</span> 원
</body>
<script>
	//전역변수 (최종결제 변수)
	var totalsum = 0;
	
	//전체선택 함수 (체크부분 숙제 js03,02확인)
	function all_ck(e){
		totalsum = 0;	//전체 체크시 전역변수 값을 다시 초기화를 진행
		var w = 1;	
		while(w <= 4){
			document.getElementById("a"+w).checked = e;
			if(e == true){
				totalsum = totalsum + Number(document.getElementById("a"+w).value);	
			}else{
				if(totalsum != 0){	//-값이 나오는 상황이 발생 0값이 아닐 경우 해당 수식구가 작동되지 않도록 조건을 사요
				totalsum = totalsum - Number(document.getElementById("a"+w).value);
				}
			}
			w++;
		}
		document.getElementById("total").innerText = totalsum;
	}
	
	function basket(v,user){
		if(user == true){
			//totalsum += Numver(v);
			totalsum = totalsum + Number(v);
		}else{
			totalsum -= Number(v);
		}
		document.getElementById("total").innerText = totalsum;
		
	}
	
	
</script>
</html>
